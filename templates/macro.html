<!DOCTYPE html>
<html>
<head>
    <title>Macro Page: Number of Dogs Per New York City Zipcode</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Domine:wght@400..700&family=Mate:ital@0;1&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="icon" type="image/x-icon" href="/photos/dog_icon.png">
    {% include 'integrateBootstrap.html' %}
</head>
    
<body>
{% include 'navbar.html' %}
<br> 
<h1>Number of Dogs Per New York City Zipcode</h1>
<h2>By Looking at Dog Licenses</h2>


<div id="macro_graph">
    {% include 'NYCZipCodeMapSVG/new-york.svg' %}
  </div>

<script>
    let data = {{zipcode_color  | tojson}}
    let zipcodes = Object.keys(data)
    let colors = Object.values(data)

    var mouseOverFunction = function () {
           this.setStyle("fill: #ebc034"); // your colour change
    };
    
    function getValueByKey(obj, value) {
        return obj[value]
        }
    for (zip of zipcodes) {
        if (document.getElementById(zip) !== null) {
            path = document.getElementById(zip);
            //console.log(path);
        }
        //console.log("'" + getValueByKey(data, zip) + "'");
        path.setAttribute('style', "fill: rgb(" + getValueByKey(data, zip) + ");");
        path.onmouseover = mouseOverFunction;

    }



    window.onload =()=>{

    const NamSpace= 'http://www.w3.org/2000/svg';
    let $array = [];

    document.querySelectorAll('#svg3425 path').forEach(el=>{
    if (document.getElementById(el.id) in zipcodes) {
    $array.push(el.id)
    const wrapper = document.createElementNS(NamSpace,'a');


    wrapper.setAttribute( 'href', `/micro?${el.id}`);


    el.parentNode.insertBefore(wrapper, el);
    el.parentNode.removeChild(el);
    wrapper.appendChild(el);
    
    
    }
    })

    console.log($array);
    }


    
</script>
<br>
<h3>NYC Boroughs Reference</h3>
<img src="{{url_for('static', filename='/photos/NYCborough_map.jpeg')}}" class="img-fluid" style="max-width: 100%; height: auto;" alt="Dog in a Field">
<br>
<br> 
<h3>Takeaways</h3>
<ul>
    <li> Most likely because of its high population (of humans), Manhattan has the highest number of dog licenses among the boroughs.</li>
    <li> Interestingly, the zipcodes with the highest amount of dog licenses are 10023, 11201, and 10025, with 2025, 2150, and 2380 dog licenses respectively. 10023 and 10025 are on the Upper West Side, while 11201 coincides with Downtown Brooklyn. </li>
    <li> The zipcodes with the least dog licenses (those with 1 dog or 0 dogs) are NYC's "unique" zipcodes, tiny zipcodes that represent a single building or special area such as the World Trade Center. </li>
</ul>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
{% include 'footer.html' %}
</body>
</html>