<!DOCTYPE html>
<html>
<head>
    <title>Micro Page: Comparing Breed Populations in {{zipcode}}</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Domine:wght@400..700&family=Mate:ital@0;1&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="icon" type="image/x-icon" href="/photos/dog_icon.png">
    {% include 'integrateBootstrap.html' %}
</head>
    
<body>
{% include 'navbar.html' %}
<br>
<h1>Comparing Dog Breed Populations in {{zipcode}}</h1>

<div class="container">
  <table>
    <tr>
      <th><div id="dog_breeds" style="width:100%;max-width:70%"></div></th>
      <th><div class="col">
        {% if sorted_breeds_list[0][0] == "Unknown" %}
        <p style="text-align: center; vertical-align: middle;">{{sorted_breeds_list[0][0]}} breeds are the most popular in {{zipcode}}. </p>
        {% else %}
        <p style="text-align: center; vertical-align: middle;">The most popular breed of dog in {{zipcode}} are {{sorted_breeds_list[0][0] + "s"}}. </p>
        {% endif %}
      </div></th>
    </tr>
    <tr>
      <th><div id="breeds_num" style="width:100%;max-width:70%"></div></th>
      <th style="text-align: center; vertical-align: middle;"> 
        {% if (zip_num_breeds - avg_num_breeds) >= 75 %}
          <p>{{zipcode}}'s number of breeds far surpasses the average number of breeds across zipcodes. </p>
        {% elif 25 <= (zip_num_breeds - avg_num_breeds) < 75 %}
          <p>{{zipcode}}'s number of breeds surpasses the average number of breeds across zipcodes by a fair amount. </p>
        {% elif 10 <= (zip_num_breeds - avg_num_breeds) < 25 %}
          <p>{{zipcode}}'s number of breeds surpasses the average number of breeds across zipcodes slightly. </p>
        {% elif -10 <= (zip_num_breeds - avg_num_breeds) < 10 %}
          <p>The number of breeds in {{zipcode}} and the average number of breeds across zipcodes are similar. </p>
        {% elif -25 <= (zip_num_breeds - avg_num_breeds) < -10 %}
          <p>The average number of breeds across zipcodes surpasses the number of breeds in {{zipcode}} slightly. </p>
        {% elif -40 <= (zip_num_breeds - avg_num_breeds) < -25 %}
          <p>The average number of breeds across zipcodes surpasses the number of breeds in {{zipcode}} by a fair amount. </p>
        {% elif -70 < (zip_num_breeds - avg_num_breeds) < -40 %}
          <p>The average number of breeds across zipcodes far surpasses the number of breeds in {{zipcode}}. </p>
        {% endif %}
      </th>
    </tr>
  </table> 
</div>


<script>
var data = Object.entries({{sorted_breeds_dict | tojson }});
const sortedDict = Object.fromEntries(
      data.sort(([,a],[,b]) => a- b)
  );
var sorted_data = Object.entries(sortedDict)
const breeds = Object.keys(sortedDict)
const pops = Object.values(sortedDict);
console.log(breeds);
console.log(pops);


const final_data = [{
  x:pops,
  y:breeds,
  type:"bar",
  orientation:"h",
  marker: {color:"rgba(129, 4, 196, 0.6)"}
}];

const layout = {title: "<b>" + `Top Ten Most Popular Dog Breeds in {{zipcode}}` + "</b>", 
  autosize: false,
  margin: {
    l: 300,
    r: 50,
    b: 100,
    t: 100,
    pad: 4
  }};
  var subtitle = "<b>" + "(Dog Breed Populations Sorted From Most Popular to Least Popular)" + "</b>"
  layout['title'] += "<br>" + subtitle;

Plotly.newPlot("dog_breeds", final_data, layout);


var data2 = Object.entries({{final_dict | tojson }});
console.log(data2);
const labels = [data2[0][0], data2[1][0]]
const num_breeds = [data2[0][1], data2[1][1]]
console.log("l", labels);
console.log("n", num_breeds);
const final_data2 = [{
  x:num_breeds,
  y:labels,
  type:"bar",
  orientation:"h",
  marker: {color:"rgba(129, 4, 196, 0.6)"}
}];

const layout2 = {title:"<b>" + "Average Number of Different Breeds of Zipcodes" + "<br>" + "v.s. Number of Different Breeds in {{zipcode}}" + "</b>", autosize: false,
  margin: {
    l: 300,
    r: 50,
    b: 100,
    t: 100,
    pad: 4
  }};

Plotly.newPlot("breeds_num", final_data2, layout2);

   </script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
{% include 'footer.html' %}
</body>
</html>